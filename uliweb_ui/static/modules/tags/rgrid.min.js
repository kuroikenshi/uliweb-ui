riot.tag2("rgrid",'<query-condition rules="{query_rules}" fields="{query_fields}" layout="{query_layout}"></query-condition> <rtable cols="{cols}" options="{rtable_options}" data="{data}"></rtable> <div class="clearfix tools"> <pagination if="{pagination}" data="{data}" url="{url}" page="{page}" total="{total}"></pagination> <div if="{!pagination}" id="pagination" class="pull-left"></div> </div>',"","",function(t){self=this,this.data=new DataSet,this.cols=t.cols,this.url=t.url,this.page=t.page||1,this.total=t.total||0,this.pagination=t.pagination||!0,this.query_rules=t.query.rules,this.query_fields=t.query.fields,this.query_layout=t.query.layout,this.rtable_options={tableClass:t.tableClass||"table table-bordered",nameField:t.nameField||"name",labelField:t.labelField||"title",onUpdate:t.onupdate||function(t){$("#pagination").text("共 "+t.length+" 条记录")}},this.on("mount",function(){this.load()}),this.load=function(t){self.url=t||self.url,self.data.load(self.url,function(t){return self.total=t.total,t.rows}).done(function(){self.update()})}});