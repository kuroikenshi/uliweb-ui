riot.tag2("rtable",'<yield></yield> <table class="{options.tableClass}"> <thead> <tr> <th each="{c in cols}" riot-style="{c.style}">{c.title || c.name}</th> </tr> </thead> <tbody> <tr each="{row, index in rows.get()}"> <td each="{col, colval in parent.cols}"> <raw if="{!col.buttons}" content="{parent.parent.get_col_data(parent.row, parent.index, col, colval)}"></raw> <virtual if="{col.buttons}" each="{btn in col.buttons}"> <i if="{btn.icon}" class="fa fa-{btn.icon} action" title="{btn.title}" onclick="{parent.parent.action_click(parent.parent.row, btn)}"></i> <a if="{btn.label}" class="action" title="{btn.title}" href="{btn.href || \'#\'}" onclick="{parent.parent.action_click(parent.parent.row, btn)}">{btn.label}</a> </virtual> </td> </tr> </tbody> </table>','rtable rcol,[riot-tag="rtable"] rcol,[data-is="rtable"] rcol{display: none} rtable .table,[riot-tag="rtable"] .table,[data-is="rtable"] .table{margin-bottom:0px;} rtable .action,[riot-tag="rtable"] .action,[data-is="rtable"] .action{cursor:pointer;}',"",function(t){var a=this,n=a.root;this.cols=t.cols,this.nameField=t.nameField||"name",this.labelField=t.labelField||"title",this.options=t.options||{},t.data?Array.isArray(t.data)?(this.rows=new DataSet,this.rows.add(t.data)):this.rows=t.data:this.rows=new DataSet,this.bind=function(t){t.on("*",function(n,i){a.options.onUpdate&&a.options.onUpdate(t),a.update()})},this.on("mount",function(){for(var t=0,n=a.cols.length;t<n;t++){var i=a.cols[t],o=i.width;i.style="",o&&("number"==typeof o&&(o+="px"),i.style="width:"+o),i.name=i[a.nameField],i.title=i[a.labelField]}a.bind(a.rows)}),this.on("update",function(){this.start=t.start||0}),n.load=function(t){a.rows.clear(),a.rows.add(t)}.bind(this),n.change=function(t){a.rows.update(t)}.bind(this),n.setData=function(t){a.rows=t,a.bind(a.rows)}.bind(this),this.get_col_data=function(t,n,i,o){var e;return i.render&&"function"==typeof i.render?i.render(t,n,i,o):e="#"==i.name?a.start+n+1:t[i.name]||""},this.action_click=function(t,n){return function(i){n.onclick&&"function"==typeof n.onclick&&n.onclick.call(i.target,t,a)}}}),riot.tag2("raw","<span></span>","","",function(t){this.on("update",function(){this.root.innerHTML=t.content})});