function load(t,s){head.load(["/static/jsmodules.js"],function(){var e=[];$.isArray(t)?t.forEach(function(t){$.merge(e,jsmodules[t])}):e=jsmodules[t].slice(),head.load(e,s)})}function show_message(t,s){load("ui.toastr",function(){s=s||"success";var e={closeButton:!0,positionClass:"toast-top-center"},i="";"success"==s?toastr.success(t,i,e):"error"==s?toastr.error(t,i,e):"info"==s?toastr.info(t,i,e):"warning"==s?toastr.warning(t,i,e):toastr.info(t,i,e)})}function popup_url(t,s,e,i){var a;a="string"==typeof s?{url:s,title:e||""}:s,i=i||s.callback;var n={content:function(t){var s,e;return s=t.indexOf("<!-- form -->"),e=t.indexOf("<!-- end form -->"),s>-1&&e>-1?t.substring(s,e):t},async:{success:function(t){t.getContentElement().on("success.form",function(s,e){t.hide(),i&&i(e)})}},title:"Popup",width:400,cache:!1,height:"auto",padding:!0,closeable:!0,type:"async",url:"example",delay:50};load("ui.popover",function(){var s=$.extend({},n,a);$(t).webuiPopover(s),s.show&&$(t).webuiPopover("show")})}function show_popup_url(t,s,e,i){var a;a="string"==typeof s?{url:s,title:e||""}:s,a.show=!0,popup_url(t,a,e,i)}function block_message(t,s){load("ui.blockUI",function(){var e={css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"5px","-moz-border-radius":"5px",opacity:.5,color:"#fff"}},i=$.extend({},e,s,{message:t});$.blockUI(i)})}function simple_select2(t,s){load("ui.select2",function(){var e=$(t),i=e.attr("data-url")||e.attr("url"),a=e.attr("placeholder")||"请选择";"string"==typeof s&&(i=s,s={});var n;n=i?{minimumInputLength:2,width:"100%",placeholder:a,allowClear:!0,language:"zh-CN",ajax:{url:i,data:function(t){return{term:t.term,label:"text",page:t.page}},dataType:"json",processResults:function(t,s){return s.page=s.page||1,{results:t,pagination:{more:20*s.page<t.length}}}}}:{width:"100%",allowClear:!0,placeholder:a,language:"zh-CN"},$(t).select2($.extend(!0,{},n,s))})}function get_select(t,s,e){$.ajax({type:"POST",url:s,data:e||{},dataType:"json",success:function(s){var e,i,a,n="<option value=''></option>";$.each(s,function(t,s){"array"==$.type(s)?(e=s[0],i=s[1]):(e=s.value,i=s.text),n=n+"<option value="+e+">"+i+"</option>"}),a="string"==typeof t?$("select[name="+t+"]"):$(t),a.html(n)}})}function serializeObject(t){for(var s={},e=$(":input",t).serializeArray(),i=0,a=e.length;i<a;i++)s[e[i].name]=e[i].value;return s}function S4(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function getId(){return"_"+S4()+S4()}function dialog_ajax_submit(t,s){load("ui.jquery.form",function(){var e=t.getModalBody().find("form");e.ajaxSubmit({beforeSubmit:function(){t.enableButtons(!1),t.setClosable(!1)},success:function(i){i.success?(e.trigger("success.form",i),i.message&&show_message(i.message),t.close(),t.options.onSuccess&&t.options.onSuccess(t,i)):(show_message(i.message,"error"),s.showErrors(i.errors),t.options.onFail&&t.options.onFail(t,i)),t.enableButtons(!0),t.setClosable(!0),t.getButton("btnSave").stopSpin()},error:function(){t.enableButtons(!0),t.setClosable(!0),t.getButton("btnSave").stopSpin()}})})}function dialog_validate_submit(t,s){var e={rules:{},messages:{},ajax_submit:common_ajax_submit},i=$.extend(!0,{},e,s);load(["ui.jquery.validation"],function(){var e=t.getModalBody().find("form"),a=e.validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:i.rules,messages:i.messages,highlight:function(t){$(t).closest(".form-group, .table-field-row").addClass("has-error")},success:function(t){t.closest(".form-group, .table-field-row").removeClass("has-error"),t.remove()},errorPlacement:function(t,s){s.parent("div").append(t)},submitHandler:function(e){s.onBeforeSubmit&&s.onBeforeSubmit(t,e)||i.ajax_submit(t,a)}})})}function dialog(t,s){s=s||{};var e=s.onBeforeSubmit||function(t,s){return!1};load("ui.bootstrap.dialog",function(){var i,a={message:function(s){var i=$("<div></div>");return $.ajax({url:t,context:i,success:function(t){i.append($(t)),i.find(".form-actions").remove();var a=i.find("h1"),n=a.html();s.setTitle(n),a.remove();var o=i.find("form");o.size()>0&&form_widgets(o),dialog_validate_submit(s,{ajax_submit:dialog_ajax_submit,onBeforeSubmit:e})}}),i},draggable:!0,buttons:[{label:"确定",id:"btnSave",cssClass:"btn-primary btn-flat",action:function(t){var s=t.getModalBody().find("form");this.spin(),s.submit()}},{label:"取消",cssClass:"btn-default btn-flat",action:function(t){t.close()}}]};return i=$.extend(!0,{},a,s),BootstrapDialog.show(i)})}function Confirm(t,s){load("ui.bootstrap.dialog",function(){BootstrapDialog.confirm(t,s)})}function Alert(t,s){load("ui.bootstrap.dialog",function(){BootstrapDialog.confirm(t,s)})}function common_ajax_submit(t,s){load("ui.jquery.form",function(){var e=$(t);e.ajaxSubmit({beforeSubmit:function(){e.find(":submit").prop("disabled",!0)},success:function(t){t.success?e.trigger("success.form",t):(show_message(t.message,"error"),s.showErrors(t.errors)),e.find(":submit").prop("disabled",!1)},error:function(){e.find(":submit").prop("disabled",!1)}})})}function validate_submit(t,s){var e={rules:{},messages:{},ajax_submit:common_ajax_submit},i=$.extend(!0,{},e,s);load(["ui.jquery.validation"],function(){var s=$(t),e=s.validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:i.rules,messages:i.messages,highlight:function(t){$(t).closest(".form-group, .table-field-row").addClass("has-error")},success:function(t){t.closest(".form-group, .table-field-row").removeClass("has-error"),t.remove()},errorPlacement:function(t,s){s.parent("div").append(t)},submitHandler:function(t){i.ajax_submit(t,e)}})})}function form_widgets(target,options){var form=$(target),_type,element,opts,func,param;opts=$.extend(!0,{},widgets_mapping,options||{}),form.find("[widget]").each(function(index,el){element=$(el),_type=element.attr("widget"),param=eval("("+element.attr("options")+")"),func=opts[_type],func&&func(element,param)})}function get_url(t,s){var e=new QueryString(t);return e.merge(s),e.toString()}!function(t){t(function(){jQuery('<iframe src="" style="display:none" id="ajaxiframedownload"></iframe>').appendTo("body")}),t.download=function(s){if(s){var e=t("#ajaxiframedownload");e.attr("src",s)}}}(jQuery),$.fn.modal.Constructor.prototype.enforceFocus=function(){},$(document).ajaxError(function(t,s,e,i){var a=$.parseJSON(s.responseText);if(a&&!a.success&&a.redirect){var n=/\/login\b/,o=a.redirect;n.test(a.redirect)&&(o=updateURLParameter(a.redirect,"next",window.location.href)),window.location.href=o}}),$.ajaxSetup({cache:!1,traditional:!0});var widgets_mapping={date:function(t,s){load(["ui.moment","ui.pikaday"],function(){var e={format:"YYYY-MM-DD",showTime:!1};$.extend(!0,e,s||{}),$(t).pikaday(e)})},select:function(t,s){load(["ui.select2"],function(s){simple_select2(t)})},datetime:function(t,s){load(["ui.moment","ui.pikaday"],function(){var e={format:"YYYY-MM-DD hh:mm:ss",showTime:!0,use24hour:!0};$.extend(!0,e,s||{}),$(t).pikaday(e)})},file:function(t,s){load(["ui.bootstrap-filestyle"],function(e){var i={buttonText:"",buttonName:"btn-primary"};$.extend(!0,i,s||{}),$(t).filestyle(i)})},image:function(t,s){load(["ui.bootstrap-filestyle"],function(e){var i={buttonText:"",buttonName:"btn-primary",iconName:"glyphicon-picture"};$.extend(!0,i,s||{}),$(t).filestyle(i)})}};!function(t,s,e,i){function a(s){var e=[];return s?(t.each(s,function(t,s){e.push(t+'="'+s+'"')}),e.join(" ")):""}function n(t){var s,e=[];if(t.choices&&t.choices.length>0){for(var i=0,a=t.choices.length;i<a;i++)s=t.choices[i],t.multiple?selected=t.value.indexOf(s[0])>-1:selected=t.value==s[0],selected&&e.push('<span class="label label-default">'+s[1]+"</span>");return e.join(" ")}}function o(s){var e=[];return t.each(s,function(s,i){tr=["<tr>"],t.each(i,function(t,s){tr.push("<td>"+s+"</td>")}),tr.push("</tr>"),e.push(tr.join(""))}),e.join("\n")}function l(s,e){var i,a=[],n=this.fields,l="table_"+s.name;return e||a.push('<a class="btn btn-primary btn-flat btn-xs"><i class="fa fa-plus"></i> 增加</a>'),a.push('<table id="'+l+'" class="'+this.options.table_class+'">'),a.push("<thead><tr>"),t.each(s.fields,function(t,s){i=n[s],a.push("<th>"+i.label+"</th>")}),a.push("</tr></thead><tbody>"),s.data&&(t.isArray(s.data)?t.get(s.data).success(function(s){var e=o(s);t(l).find("tbody").append(e)}):a.push(o(s.data))),a.push("</tbody></table>"),a.join("\n")}function r(t,s,e,i){var n="";return(e=e||t["static"]||!1)?(i&&(n=" table-field-content"),'<div class="form-control-static'+n+'">'+this.field_to_static(t)+"</div>"):(s.value=t.value,'<input type="text" '+a(s)+' class="form-control">')}function u(t,s,e,i){var n="";return(e=e||t["static"]||!1)?(i&&(n=" table-field-content"),'<div class="form-control-static'+n+'">'+this.field_to_static(t,"******")+"</div>"):(s.value=t.value,'<input type="password" '+a(s)+' class="form-control">')}function h(t,s,e,i){var n="";return(e=e||t["static"]||!1)?(i&&(n=" table-field-content"),'<div class="form-control-static'+n+'">'+this.field_to_static(t)+"</div>"):(s.rows=s.rows||4,"<textarea "+a(s)+' class="form-control">'+t.value+"</textarea>")}function c(t,s,e,i){return e=e||t["static"]||!1,e?"":(s.value=t.value,'<input type="hidden" '+a(s)+">")}function d(t,s,e,i){return e=e||t["static"]||!1,l.call(this,t,e)}function f(t,s,e,i){var n,o="",l=t.inline;return""===t.value&&(t.value=!1),e=e||t["static"]||!1,e?(i&&(o=" table-field-content"),n=t.value?'<i class="glyphicon glyphicon-ok"></i>':'<i class="glyphicon glyphicon-remove"></i>',l?'<div class="form-control-static'+o+'">'+this.field_to_static(t,n)+" "+t.label+"</div>":'<div class="form-control-static'+o+'">'+this.field_to_static(t,n)+"</div>"):(t.value&&(s.checked="checked"),l?'<label class="checkbox-inline"><input type="checkbox" '+a(s)+"> "+t.label+"</label>":'<input type="checkbox" '+a(s)+' class="checkbox">')}function p(t,s,e,i){var n="";t.inline;return e=e||t["static"]||!1,e?(i&&(n=" table-field-content"),'<div class="form-control-static'+n+'">'+this.field_to_static(t)+"</div>"):'<input type="file" '+a(s)+' class="form-control">'}function b(t,s,e,i){var o,l="",r=[],u=t.multiple?' multiple="multiple"':"";if(e=e||t["static"]||!1)return i&&(l=" table-field-content"),'<div class="form-control-static'+l+'">'+this.field_to_static(t,n(t))+"</div>";if(r.push("<select "+a(s)+u+' class="form-control">'),t.choices)for(var h=0,c=t.choices.length;h<c;h++)o=t.choices[h],t.multiple?selected=t.value.indexOf(o[0])>-1?'selected="selected"':"":selected=t.value==o[0]?'selected="selected"':"",r.push("<option "+selected+'value="'+o[0]+'">'+o[1]+"</option>");return r.push("</select>"),r.join("")}function m(t,s,e,i){var o,l,r=[];if(e=e||t["static"]||!1)return i&&(cls=" table-field-content"),'<div class="form-control-static'+cls+'">'+this.field_to_static(t,n(t))+"</div>";for(var u=0,h=t.choices.length;u<h;u++)l=t.choices[u],delete s["class"],s.id=s.id+(u+1),s.name=t.name,o=t.value==l[0]?'checked="checked"':"",t.inline?(r.push('<label class="radio-inline">'),r.push('<input type="radio" '+a(s)+o+'value="'+l[0]+'">'),r.push(l[1]),r.push("</label>")):(r.push('<div class="radio"><label>'),r.push('<input type="radio" '+a(s)+o+'value="'+l[0]+'">'),r.push(l[1]),r.push("</label></div>"));return r.join("")}function g(t,s,e,i){var o,l,r=[];if(e=e||t["static"]||!1,t.multiple=!0,e)return i&&(cls=" table-field-content"),'<div class="form-control-static'+cls+'">'+this.field_to_static(t,n(t))+"</div>";for(var u=0,h=t.choices.length;u<h;u++)l=t.choices[u],s.name=t.name,o=t.value.indexOf(l[0])>-1?'checked="checked"':"",t.inline?(r.push('<label class="checkbox-inline">'),r.push('<input type="checkbox" '+a(s)+o+'value="'+l[0]+'">'),r.push(l[1]),r.push("</label>")):(r.push('<div class="checkbox"><label>'),r.push('<input type="checkbox" '+a(s)+o+'value="'+l[0]+'">'),r.push(l[1]),r.push("</label></div>"));return r.join("")}var v=function(s,e){s?this.element=t(s):this.element=null,this.defaults={attrs:{role:"form",method:"POST"},layout_class:"bs3t",layout:{table_class:"table table-hover table-layout",column_class:"form-group",button_offset:0,label_width:0,fields:[],rows:[],buttons:[]},fields:[],rules:{},messages:{},data:{},js_form:!0,buttons_class:"form-actions",create_table:l,table_class:"table table-bordered"},this.options=t.extend(!0,{},this.defaults,e),this.buf=[],this.fields={},this.fields_list=[],this.hidden_fields=[],this.has_file=!1,this.rows=[]};v.prototype={html:function(){return this._init_fields(),this._init_layout(),this.begin(),this.body(),this.buttons(),this.end(),this.buf.join("")},init:function(){var s=this.html();this.element.append(s),form=this.element.find("form"),this.options.readonly||t.isEmptyObject(this.options.rules)||validate_submit(form,{rules:this.options.rules,messages:this.options.messages,ajax_submit:this.options.ajax_submit}),this.options.js_form&&form_widgets(form)},begin:function(){this.has_file&&(this.options.attrs.enctype="multipart/form-data");var t=a(this.options.attrs);this.buf.push("<form "),this.buf.push(t),this.buf.push(">")},body:function(){this._process_hidden();var t=this.options.layout_class||"bs3h";"bs3v"===t?this.v_layout():this.v_layout(!0)},buttons:function(){var s,e,i,n,o;if(this.options.layout.buttons){s=this.options.layout.buttons,this.buf.push('<div class="form-group '+this.options.buttons_class+'">'),this.options.layout.button_offset&&(n=this.options.layout.button_offset,this.buf.push('<div style="padding-left:'+n+'">'));for(var l=0,r=s.length;l<r;l++)e=s[l],t.isPlainObject(e)?(i=t.extend({},e),o=i.text,delete i.text,this.buf.push("<button "+a(e)+">"+o+"</button>\n")):this.buf.push(e+"\n");this.options.layout.button_offset&&this.buf.push("</div>"),this.buf.push("</div>")}},_init_fields:function(){for(var s,e,i=this.options.fields,a=0,n=i.length;a<n;a++)s=i[a],this.fields[s.name]=s,s.id="field_"+s.name,s.rules||(s.rules={}),e=this.options.rules[s.name],e&&t.extend(s.rules,e),s.value=this.options.data[s.name],"undefined"==typeof s.value&&(s.value=""),this.options.rules[s.name]=s.rules,"hidden"===s.type?this.hidden_fields.push(s):("file"!==s.type&&"image"!==s.type||(this.has_file=!0),this.fields_list.push(s.name))},_init_layout:function(){var s,e;if(this.options.layout){if(this.options.layout.fields){s=this.options.layout.fields;for(var i=0,a=s.length;i<a;i++)e=s[i],this.fields.hasOwnProperty(e.name)?t.extend(!0,this.fields[e.name],e):this.fields[e.name]=e}this.options.layout.rows?this.rows=this.options.layout.rows:this.rows=this.fields_list}},_process_hidden:function(){for(var t=this.hidden_fields,s=0,e=t.length;s<e;s++)this.buf.push(this.field_to_html(t[s]))},end:function(){this.buf.push("</form>")},_get_widget:function(s){var e=t.fn.formb.type_mapping[s];return e||(e="str"),e},field_to_html:function(s,e,i){var a={};s.name&&(a.name=s.name),s.placeholder&&(a.placeholder=s.placeholder),s.attrs&&t.extend(a,s.attrs),a.data_type=s.type,a.widget=s.widget||this._get_widget(s.type);var n=t.fn.formb.converters[a.widget]||r;return n.call(this,s,a,e,i)},field_to_label:function(t,s,e){if(t.hide_label_grid)return"";var i={},n=[];return e&&(i["class"]="table-field-label"),i["for"]=t.id,n.push("<label "+a(i)+">"),t.hide_label||(n.push(t.label),t.label&&n.push(": "),!s&&t.rules.required&&n.push('<span class="field_required">*</span>')),n.push("</label>"),n.join("")},field_to_static:function(t,s){s=s||t.value;var e=t.render;return e?e.call(this,t.value):s},field_to_help_string:function(t){return t.help_string?'<p class="help-block">'+t.help_string+"</p>":""},v_layout:function(s){for(var e,i,a=!1,n=!0,o=!1,l=this.options.layout.table_class,r=0,u=this.rows.length;r<u;r++){if(e=this.rows[r],t.isArray(e))s&&!o&&(this.buf.push('<table class="'+l+'">'),o=!0);else{if("-- "==e.substr(0,3)&&" --"==e.substr(e.length-3,3)){a=!0,i=e.substring(3,e.length-3).trim(),n?(this.buf.push("<fieldset><legend>"+i+"</legend>"),n=!1):(o&&this.buf.push("</table>"),this.buf.push("</fieldset><fieldset><legend>"+i+"</legend>")),s&&(this.buf.push('<table class="'+l+'">'),o=!0);continue}s&&!o&&(this.buf.push('<table class="'+l+'">'),o=!0),e=[e]}this._process_line(e,s)}o&&this.buf.push("</table>"),a&&this.buf.push("</fieldset>")},_process_line:function(t,s){for(var e,i,a,n,o,l=t.length,r=0,u=[],h=[],c=0;c<l;c++)n=this._process_column(t[c],l,s),u.push(n),r+=n[0];if(1===l)s?(h.push('<tr><td colspan="12">'),h.push(u[0][1]),h.push("</td></tr>")):h.push(u[0][1]);else if(s){for(h.push("<tr>"),e=0,_len=u.length;e<_len;e++)i=u[e][0],a=u[e][1],o=12*i/r,h.push('<td colspan="'+o+'" width="'+100*o/12+'%">'+a+"</td>");h.push("</tr>")}else{for(h.push('<div class="row">'),e=0,_len=u.length;e<_len;e++)i=u[e][0],a=u[e][1],h.push('<div class="col-sm-'+12*i/r+'">'),h.push(a),h.push("</div>");h.push("</div>")}this.buf.push(h.join(""))},_process_column:function(t,s,e){if("<empty>"==t)return[12/s,""];var i=this.fields[t];if(!i)throw"Field "+t+" if not found";var n=i.colspan||1,o=12*n/s,l={},r=[];return e?[o,'<div class="table-field-row">'+this.field_to_label(i,this.options.readonly,e)+'<div class="table-field-col">'+this.field_to_html(i,this.options.readonly,e)+this.field_to_help_string(i)+"</div></div>"]:(l["class"]=this.options.layout.column_class,l.id="div_"+i.id,r.push("<div "+a(l)+">"),r.push(this.field_to_label(i,this.options.readonly,e)),r.push(this.field_to_html(i,this.options.readonly,e)),r.push(this.field_to_help_string(i)),r.push("</div>"),[o,r.join("")])}},t.fn.formb=function(t){var s=new v(this,t);return s.init()},t.fn.formb_html=function(t){var s=new v(this,t);return s.html()},t.fn.formb.type_mapping={str:"str",unicode:"str",select:"select",text:"text",lines:"text",password:"password",hidden:"hidden","int":"str",list:"str",radios:"radios",image:"file","float":"str",file:"file",bool:"checkbox",checkboxes:"checkboxes",date:"date",time:"str",datetime:"datetime",table:"table"},t.fn.formb.converters={str:r,password:u,hidden:c,checkbox:f,file:p,select:b,text:h,radios:m,checkboxes:g,table:d}}(jQuery,window,document),!function(t){"use strict";function s(s){var e=this.options,i=this.$element.find("ul");if(!(e.total<=e.pageRows)){var a=i.find("li:last");this.btnLast&&(a=a.prev());for(var n=s;n<s+e.length&&n!=this.totalPages;n++){t('<li class="page"/>').insertBefore(a).append(t("<a>").attr("rel",n+1).attr("href","#").text(n+1))}}}function e(t){var e=this.options,a=this.$element.find("ul");a.find("li.page").remove();var n=t,o=e.length/2;e.length%2>0&&(o=(e.length+1)/2);var l=0;t>=0&&t<this.totalPages&&(t>=o&&(this.totalPages-t>o?l=t-(o-1):this.totalPages>e.length&&(l=this.totalPages-e.length)),s.call(this,l),a.find("li").removeClass("active"),a.find("li a[rel="+(n+1)+"]").parent().addClass("active")),i.call(this)}function i(){this.options;this.totalPages>1?(this.currentPage>0?(this.btnPrev&&this.btnPrev.removeClass("disabled"),this.btnFirst&&this.btnFirst.removeClass("disabled")):(this.btnPrev&&this.btnPrev.addClass("disabled"),this.btnFirst&&this.btnFirst.addClass("disabled")),this.currentPage==this.totalPages-1?(this.btnNext&&this.btnNext.addClass("disabled"),this.btnLast&&this.btnLast.addClass("disabled")):(this.btnNext&&this.btnNext.removeClass("disabled"),this.btnLast&&this.btnLast.removeClass("disabled"))):(this.btnPrev&&this.btnPrev.addClass("disabled"),this.btnNext&&this.btnNext.addClass("disabled"),this.btnFirst&&this.btnFirst.addClass("disabled"),this.btnLast&&this.btnLast.addClass("disabled"))}var a=function(s,e){var i=this;this.options=e,this.$element=t(s).empty();var a=t('<ul class="pagination"/>').appendTo(this.$element);this.totalMessage=this.options.totalMessage?t('<li class="disabled total"><a href="#"></a></li>'):"",this.btnFirst=this.options.first?t('<li class="first"><a href="#">'+this.options.first+"</a></li>"):"",this.btnPrev=this.options.prev?t('<li class="prev"><a href="#">'+this.options.prev+"</a></li>"):"",this.btnNext=this.options.next?t('<li class="next"><a href="#">'+this.options.next+"</a></li>"):"",this.btnLast=this.options.last?t('<li class="last"><a href="#">'+this.options.last+"</a></li>"):"",this.btnRefresh=this.options.last?t('<li class="refresh"><a href="#">'+this.options.refresh+"</a></li>"):"",this.totalMessage&&a.append(this.totalMessage),this.btnFirst&&this.options.total>this.options.pageRows&&a.append(this.btnFirst),this.btnPrev&&this.options.total>this.options.pageRows&&a.append(this.btnPrev),this.btnNext&&this.options.total>this.options.pageRows&&a.append(this.btnNext),this.btnLast&&this.options.total>this.options.pageRows&&a.append(this.btnLast),this.btnRefresh&&a.append(this.btnRefresh),this.$element.on("click.pagination","li:enabled, li",function(s){s.preventDefault();var e=t(this),a=i.$element.find("ul");e.hasClass("prev")?i.currentPage=parseInt(a.find("li.active a").text())-1:e.hasClass("next")?i.currentPage=parseInt(a.find("li.active a").text())+1:e.hasClass("first")?i.currentPage=1:e.hasClass("last")?i.currentPage=i.totalPages:e.hasClass("refresh")?i.currentPage=parseInt(a.find("li.active a").text()):i.currentPage=parseInt(e.text()),e.hasClass("disabled")||i.load(--i.currentPage)})};a.prototype={constructor:a,show:function(t,s){if(this.options.start=s||this.options.start,this.options.total=t||this.options.total,this.currentPage=this.options.start-1,this.totalPages=parseInt(this.options.total/this.options.pageRows),this.options.total%this.options.pageRows>0&&this.totalPages++,this.totalMessage){var i=this.options.totalMessage.replace("$pages",this.totalPages);i=i.replace("$records",this.options.total),this.totalMessage.html('<a href="#">'+i+"</a>")}e.call(this,this.currentPage),this.options.initLoad&&this.load(this.currentPage)},load:function(t){e.call(this,t),this.options.onChange&&this.options.onChange(this.currentPage+1)}},t.fn.pagination=function(s){var e=Array.prototype.slice.call(arguments);return e.shift(),this.each(function(){var i=t(this),n=i.data("pagination"),o=t.extend({},t.fn.pagination.defaults,"object"==typeof s&&s);n||i.data("pagination",n=new a(this,o)),"string"==typeof s&&n[s].apply(n,e)})},t.fn.pagination.defaults={total:0,pageRows:0,length:10,next:"Next",prev:"Prev",first:"First",last:"Last",start:1,totalMessage:"Total $pages pages / $records records",initLoad:!1,onChange:null},t.fn.pagination.Constructor=a}(window.jQuery),function(t){QueryString=function(t){this.urlParams={},this.load(t)},QueryString.prototype={load:function(t){this.urlParams={},this.url=t;var s,e,i,a,n=/\+/g,o=/([^&=]+)=?([^&]*)/g,l=function(t){return decodeURIComponent(t.replace(n," "))};for(t||(t=window.location.search),"?"==t.charAt(0)?(t=t.substring(1),this.url=""):(a=t.indexOf("?"),a>-1?(this.url=t.substring(0,a),t=t.substring(a+1)):t="");s=o.exec(t);)e=l(s[1]),i=l(s[2]),this.set(e,i,!1);return this},toString:function(s){var e={hash:!1,traditional:!0};s&&t.extend(e,s);var i=jQuery.ajaxSettings.traditional;jQuery.ajaxSettings.traditional=e.traditional;var a="?"+t.param(this.urlParams);return jQuery.ajaxSettings.traditional=i,e.hash&&(a+=window.location.hash),a},merge:function(s){t.extend(this.urlParams,s)},set:function(s,e,i){return i=i||!1,i?this.urlParams[s]=e:s in this.urlParams?"array"===t.type(this.urlParams[s])?this.urlParams[s].push(e):""==this.urlParams[s]?this.urlParams[s]=e:this.urlParams[s]=[this.urlParams[s],e]:this.urlParams[s]=e,this},get:function(t){return this.urlParams[t]},remove:function(t){return t in this.urlParams&&delete this.urlParams[t],this}},t.query_string=new QueryString}(jQuery);